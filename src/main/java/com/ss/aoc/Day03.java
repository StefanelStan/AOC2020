package com.ss.aoc;

public class Day03 {
    private String inputData = "..#.......#..##...#...#..#.#...\n" +
            "..##..#..#.....#.........#....#\n" +
            "...#.##..#.#......#.#....#.....\n" +
            "...#.....#......#...#..........\n" +
            ".......#.#..#..#....##....##...\n" +
            ".#......#......#.#..#....#.#...\n" +
            ".#..........#.....###.##..#.#..\n" +
            "....#...##...........#.........\n" +
            "##......#.#...#...#....##.#...#\n" +
            ".....#.....#.#..#....###...#..#\n" +
            ".#....#.........#...#.......#.#\n" +
            ".##......#.#.........#....#.#..\n" +
            "...#........###..#......##....#\n" +
            ".#.....###..........#...#....##\n" +
            "............#......#...#...#..#\n" +
            ".....#.#....#.#.#...........#.#\n" +
            "....#.....#...##.##.....###..#.\n" +
            ".....#.##......#.##.#...#.#.#..\n" +
            "##.....#.##.##....#..##......#.\n" +
            ".....#.....#........#........##\n" +
            "#..#...#.#.#..##....#....##..#.\n" +
            ".#......................##..#..\n" +
            "#.#.#................#.....#...\n" +
            "..#....#.#.#..##..#..#.....##..\n" +
            ".....###..#.............#....##\n" +
            "..#....#.#...#......###..#.....\n" +
            ".......####.....##......#......\n" +
            "..##...#..#...#.#..#......#....\n" +
            "..##..#..#.....#......##.##....\n" +
            ".#......#................#..#.#\n" +
            "...............#....#.......#..\n" +
            "#...........#.#.#........#.#...\n" +
            "...#...#..#.....##..#.##...#.#.\n" +
            ".#.#..#.#.....#...#..##....#.##\n" +
            ".........#...#.#.#....#.......#\n" +
            "............##.#..#.#........#.\n" +
            "#..#..#........#......####.....\n" +
            "..#.#...#...#...#.#...#..#..#..\n" +
            "#....................#.#.#....#\n" +
            ".......#.....#....#....##..#...\n" +
            ".......#.............##.....#..\n" +
            "..##..#.......#..#.........#..#\n" +
            "..##.#........#...#...#..#..#..\n" +
            "..##.#...#................#..#.\n" +
            "..#.....##...##......###.....#.\n" +
            ".....#.....#......#......#.....\n" +
            "....##.#.#....#.....#..........\n" +
            "...#...#.#.....#.###.....#....#\n" +
            "......##....#..##...##.#.......\n" +
            "......................##......#\n" +
            ".##......#...#...#...##.#.##.#.\n" +
            "#.......#...#.....#........#.#.\n" +
            "...............#......#.......#\n" +
            ".#..##...#....#.....###....##..\n" +
            "...#..###...#..#....#.#..#.....\n" +
            ".#...#....#.................#..\n" +
            ".......##....#..##......#.#....\n" +
            "....#.....#.....###...#....#...\n" +
            "..##..#..##........#...........\n" +
            "....#..#.#............#........\n" +
            "####.....##.........#....#.....\n" +
            "........#.....#......#......##.\n" +
            "#..........#........#....#...##\n" +
            "#..#...###.....##.....#.##...#.\n" +
            "......#....##.............#..#.\n" +
            "..#......###...#...#..##.....#.\n" +
            "#.##...#......##.###....#....#.\n" +
            "...............#....#.....###.#\n" +
            "#......#........#.#..##.#.....#\n" +
            "#..............#..##.#....#....\n" +
            ".##....###...#...#.#....#....#.\n" +
            ".......#...#.......#....#..##..\n" +
            "..##.#.....#..#...............#\n" +
            ".##..............#.......#...#.\n" +
            ".....#...#.#..#.........#..#...\n" +
            "........#.#.###......#..#......\n" +
            "..#.......###..#...#...........\n" +
            "............#.#.....#....#...#.\n" +
            "#...#..#......#..#......#......\n" +
            "..##..#......#..#.......#.....#\n" +
            "............#.##.....#.#...#...\n" +
            "....#.#...#.#...#........##....\n" +
            "........##...#...##.....#.#..#.\n" +
            ".#..........#.##...............\n" +
            "###.#..#...###..###..#........#\n" +
            "....#..#............#...#.#.#..\n" +
            ".#....###........#.......#...#.\n" +
            "..........#..#.....#......#....\n" +
            "..##..#.#....#..#.....##....#..\n" +
            "...#...............#......#....\n" +
            "......#.#.#...###.....##.#.....\n" +
            ".#...#.#.#.#....#.....#..#..#.#\n" +
            "..#.....#..##....#......#.#.#..\n" +
            "##.#....#.......#.#.#.......#..\n" +
            ".#.#.#........##.#....#........\n" +
            "...#..#...#.#.........#..#....#\n" +
            "#.#......#.#.#..#.#............\n" +
            "......#.....#.....#.......#..#.\n" +
            ".........#..#.##..#..###....#.#\n" +
            ".......#..........#..#.........\n" +
            "......#.#.##...#.#...##........\n" +
            "...........##..##.##....#......\n" +
            "..#..#...#.###...##.....#..#..#\n" +
            ".#...##.......#.#..........#..#\n" +
            "##......#...........#.#........\n" +
            "..#..#.....##..#.#.......#...#.\n" +
            ".#....#..#.....###.......#...#.\n" +
            "...#..#...#...###.#.###..#.....\n" +
            ".......#...#.##......#.#.#.#...\n" +
            ".#.......#...#...#...##........\n" +
            "...#........#....#..#.#...#.#..\n" +
            "..#............#.....#.#....#..\n" +
            "#.....#.#..#.#....#...#.#.#....\n" +
            "#......#......##.#...........#.\n" +
            ".#..#.........##.#........#....\n" +
            ".#....#.#...#........#......#..\n" +
            "....#..#..#....#..#.#.....#..#.\n" +
            ".##.#.....#..#.#...#.....#..###\n" +
            "#..#......#..##....##..#.......\n" +
            ".......#..##....#.###..........\n" +
            ".#......#..........#........#..\n" +
            ".........#.....#......#.#......\n" +
            ".....#..#.......#...#.#....#...\n" +
            ".#......#...#..#......#.....#.#\n" +
            "#.#.#..#.........#.......##....\n" +
            "...#..#.....#.#..#......#...#..\n" +
            ".##...#...#.#....#.....#.#...#.\n" +
            "..#......##......#....#.#..#...\n" +
            "....#.#.....#..#...........#...\n" +
            ".#........#....#....#...#......\n" +
            "..#.#.....#.......#.#.#.##..##.\n" +
            "...#..#.##.......#...#.........\n" +
            "....##.#.#..#.#..#.#.#..#.#.#.#\n" +
            "......#.......#.....#...##.#...\n" +
            "..#.##.....#....#...#...##.##.#\n" +
            "..##.........##.........#..#...\n" +
            ".....###......####..#.#...#....\n" +
            "...#....#....##.............#.#\n" +
            ".#.........#.......##..#.#.....\n" +
            "...#..#........#...............\n" +
            "........#........##......#.#...\n" +
            "##...#......#.....#.##........#\n" +
            ".............#.#........#......\n" +
            ".......##.........#.......#....\n" +
            "....#.......#......#..###....#.\n" +
            ".#.##........#.....#......#....\n" +
            "#...........##...#..##.........\n" +
            ".....#.#........#........##...#\n" +
            "#.........#..##.....#...#....#.\n" +
            ".........#...####..#....###....\n" +
            "###.#..##.......#....#....#.##.\n" +
            "...........#.....#.#...#..#....\n" +
            ".##......###.#.#.#....#........\n" +
            "....#..................#.###.#.\n" +
            "#..##...#......#...#......###..\n" +
            ".#.....#..##......#.#.#.#......\n" +
            "..##...#..#.......##.#.......#.\n" +
            "...#..#..##..##..##.#..####....\n" +
            "......#..#..............#.#####\n" +
            "....#....#..#...#...#.#........\n" +
            ".###...#.......#..#........#...\n" +
            "........#.#......##...#........\n" +
            ".#..#.......##.......#.....##..\n" +
            "...##..........##...........#..\n" +
            "......................#..#.#.#.\n" +
            "#..#.....#......#.....#....#.##\n" +
            "..#......#.....#....#...#.##.#.\n" +
            "............#...#...#......#.##\n" +
            "........##.......#......##.....\n" +
            "..#.##.....#....#..##...#......\n" +
            "........#.#...##.#..#...#....#.\n" +
            "...##............##.....#..#...\n" +
            "...###.##....#....#.#.#.#..#...\n" +
            "............#..#....#..#.....##\n" +
            "...#......##.......#......##..#\n" +
            ".......#......#........#.....#.\n" +
            ".#....#.##..........#..........\n" +
            "..###.........#..#...##.....#..\n" +
            "##....##..#.......###....#.#.#.\n" +
            "#.......#.#.##.................\n" +
            "..#..........#................#\n" +
            "....#.#....#...###...#......#..\n" +
            ".#..........#..#..##.....#...##\n" +
            ".#.....###....#.#...#.#........\n" +
            ".........##.........#..#.#.....\n" +
            ".#.....##....#......##.#....#..\n" +
            "###..#...#..#.........#......#.\n" +
            "..##.....#....#............#...\n" +
            ".....##.##....#.....#..#..#....\n" +
            ".......###...#..........#......\n" +
            "...#........#....#.##.#........\n" +
            "........###....##........##.#..\n" +
            "....#....#........#.....##.....\n" +
            ".#........#.#........#...#..#..\n" +
            "#..#..#......#....##.#..###....\n" +
            "...........#...#...#....#.#...#\n" +
            ".#..#.....#.##..#......##......\n" +
            "..#.#...............##..##.###.\n" +
            "...#.#...#............##.#..#..\n" +
            ".#.#....#....#................#\n" +
            "...#..#.#.##.#.#....#......#...\n" +
            ".........#..#.......##.##.#....\n" +
            "..............#..##.#.....#....\n" +
            "......#.........#...#...##.#..#\n" +
            "....##.....#.#...#.#.####.#....\n" +
            "#..#.#....#.##.......#....#....\n" +
            "...##....#...................##\n" +
            "##.#.......#....#.#.........#.#\n" +
            ".##.#..###...#.#.........#.....\n" +
            "...#.#.#..#...#...#.##....#..#.\n" +
            "....#.....###...#....##........\n" +
            ".............#....#....#....#..\n" +
            "#...#.....#.#...#.#............\n" +
            "#.#....#...........##.......#..\n" +
            "..#..#.........#....###.......#\n" +
            "....###..................##...#\n" +
            ".#........#.....##...#......#..\n" +
            "#..#......#..#.....#.##..#...#.\n" +
            "....#........#.##.#......#.....\n" +
            "#.#...#...............####...##\n" +
            "#.#.....##..#.####.............\n" +
            "##...##..#.##........#.#...#...\n" +
            "...#...........#............#..\n" +
            "...#..#..#........##...........\n" +
            "..#.##..#.#...#...#..#......#..\n" +
            ".....##......#...##.....##.....\n" +
            ".......##.....##....#..........\n" +
            "..........#.#...............#.#\n" +
            "#.#..........#..#..##..#...#..#\n" +
            ".#.#..#.###................#...\n" +
            "#...#...#....#...#....#.##.##..\n" +
            ".#................###.....##...\n" +
            ".....##.#.....##.#.....#.....##\n" +
            ".......#.......#......#.#......\n" +
            "..#....#......#.....#.....#..#.\n" +
            "#......#..##..####.....#.#..#..\n" +
            ".......#...###..#...#.....#....\n" +
            "#.#.#......#.............#..###\n" +
            ".#.#.......#..#.#..#..#...#.#..\n" +
            "..#.#......#......#.#....#.....\n" +
            "..#..###..#.#.....#....#.......\n" +
            "..........#........#......#..#.\n" +
            "##..........##....##..###.##...\n" +
            "...#....#.......#..##.......#..\n" +
            "##...#............##...#.#.#.#.\n" +
            "...........#...#.#....#.....##.\n" +
            ".#................#.......#...#\n" +
            "....##.#..#.#.........###.###.#\n" +
            "#..#...###..#...#......#..##...\n" +
            "..##........#.#..##.#..........\n" +
            "...#..#...#...............#.#..\n" +
            "##.##....#...#........#...#....\n" +
            "#..#......#.##.................\n" +
            ".....#..##.##.......#..........\n" +
            "...#.....#........#......#.....\n" +
            ".....#..#......#.....##...#....\n" +
            "#......#...###....#....###.....\n" +
            "................###..#..#..#.##\n" +
            "......#.......#..........#.#..#\n" +
            "###..#..#.##.............#.#...\n" +
            "....##.#.......#...#..##.......\n" +
            "..#.....##..#..#..#.#..........\n" +
            ".#.......#.#..#........##......\n" +
            "..............#.........#......\n" +
            "..#........##....#.#.#......##.\n" +
            ".#.#.........#.#...#.#.........\n" +
            "..........#..#.##.#....#...#.#.\n" +
            "............##....#.....###...#\n" +
            "#....#..#...#.#...#.....#....#.\n" +
            ".#...##.....#......#..#........\n" +
            ".#..#...###.#..##........#...#.\n" +
            "#..#...##.####.......#.....#...\n" +
            "#.##..#...#......#.#.......#.#.\n" +
            "#.#.....##...#.#...............\n" +
            "#...........##.##.#.........#..\n" +
            "...#...........#.#.#.#....#..#.\n" +
            "..#......#.#.#....##..#.#.....#\n" +
            ".........#.#.##...##...#.#.#...\n" +
            "...........#..#.####.#..#.#.###\n" +
            "#........#.#......#..#...#.....\n" +
            "...#....#......##...#.#........\n" +
            "......#.#....#.##....#....#..##\n" +
            ".......###......#.#.....#......\n" +
            "#..........##..................\n" +
            ".###.......##..#..##...##......\n" +
            "##.#..............#....#....##.\n" +
            "#....#.....#.##.....#..#....#.#\n" +
            ".......#.......#..#..#..##..#..\n" +
            "......#...........#..##....#...\n" +
            ".....#.......#..#......#..#..##\n" +
            ".##...#......#........#....#...\n" +
            ".....#..#....#...............##\n" +
            "..#.....#....#..#.##....#.#....\n" +
            "#.#......####...#..#.........#.\n" +
            "#.#........#..#........#...#...\n" +
            "..#..............#.......###.#.\n" +
            "...#.#....##.#......#........#.\n" +
            "....###.......##.#.....##.....#\n" +
            ".........#......#.#.......##.##\n" +
            ".......#.#....#.#...#...#....#.\n" +
            "....#....#....#.#.......##.....\n" +
            "#...#.....#..#.....#...........\n" +
            "#...#..#...#.#..#.............#\n" +
            "........###..#........#........\n" +
            ".............#....#..###..#.#.#\n" +
            "#...............#..#.#.........\n" +
            "##.....###..#......#...#....#..\n" +
            ".#...................##.#.##...\n" +
            "#..#........#.#...#..#...#.....\n" +
            "................#.#.........#..\n" +
            "#.....##.#.#...#..#.........##.\n" +
            "...#.....#....#..####.#........\n" +
            "....#.#...........#............\n" +
            ".....#........##..........#....\n" +
            "..#.......#.#.#.####..#......#.\n" +
            "#.......#...##.#.#..#.#.#......\n" +
            "##........#.#...###............\n" +
            "..##........#........#...#.#.#.\n" +
            "#.#..#.#.......#....#........#.\n" +
            "..............#....#.........#.\n" +
            "#....#.#........#.............#\n" +
            "..##...#..........#........#...\n" +
            "..#..#..#....#....#............";

    private String inputData2 = "..##.......\n" +
            "#...#...#..\n" +
            ".#....#..#.\n" +
            "..#.#...#.#\n" +
            ".#...##..#.\n" +
            "..#.##.....\n" +
            ".#.#.#....#\n" +
            ".#........#\n" +
            "#.##...#...\n" +
            "#...##....#\n" +
            ".#..#...#.#";

    public long getNumberOfHitTrees() {
        String[] patterns = inputData.split("\n");
        int hitTrees = patterns[0].charAt(0) == '#' ? 1 : 0;
        int[] treesHitOnSlope = new int[5];
        for (int i = 0; i < patterns.length -1; i++) {
            if(isTreeHitOnMove(i + 1, 1, patterns[i + 1])) { ++treesHitOnSlope[0]; }
            if(isTreeHitOnMove(i + 1, 3, patterns[i + 1])) { ++treesHitOnSlope[1]; }
            if(isTreeHitOnMove(i + 1, 5, patterns[i + 1])) { ++treesHitOnSlope[2]; }
            if(isTreeHitOnMove(i + 1, 7, patterns[i + 1])) { ++treesHitOnSlope[3]; }
        }

        for (int i = 0; i < patterns.length -1; i+=2) {
            if(isTreeHitOnMove2(i + 2, 1, patterns[i + 2])) { ++treesHitOnSlope[4]; }
        }
        long multiplication = 1;
        for (int hit : treesHitOnSlope) {
            multiplication *=hit;
        }
        return multiplication;
    }

    private boolean isTreeHitOnMove(int rowToMove, int rightSteps, String pattern) {
        int jumpIndex = rowToMove * rightSteps;
        if (jumpIndex >= pattern.length()) jumpIndex = jumpIndex % (pattern.length());
        return pattern.charAt(jumpIndex) == '#';
    }

    private boolean isTreeHitOnMove2(int rowToMove, int rightSteps, String pattern) {
        int jumpIndex = (rowToMove/2) * rightSteps;
        if (jumpIndex >= pattern.length()) jumpIndex = jumpIndex % (pattern.length());
        return pattern.charAt(jumpIndex) == '#';
    }
}
